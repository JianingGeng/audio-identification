venv\Scripts\activate

python manage.py makemigrations
python manage.py migrate

exit Django python shell
exit()
python manage.py shell


# Import your task
from myapp.task import process_audio_task

# Run the task
result = process_audio_task.apply()

# Since this is a synchronous call in the shell, it will wait for the task to finish
# and return the result directly to you.
print(result.result)


from myapp.task import process_audio_task

# Retrieve all results
results = AudioComparisonResult.objects.all()

for result in results:
    print(f"Source Audio: {result.source_audio}, Compared Audio: {result.compared_audio}, Similarity: {result.similarity}")


from myapp.task import process_audio


single_audio_path = 'D:\\testDjango\\single_audio_files\\alone1.wav'
folder_paths = ['D:\\testDjango\\audio_files\\1_48.wav', 'D:\\testDjango\\audio_files\\1_49.wav']

print("Starting the process")
results = process_audio(single_audio_path, folder_paths)
print("Finished processing")
print(results)


# 导入任务
from myapp.task import process_audio_task

# 同步执行任务
result = process_audio_task

# 查看结果
print(result)


from myapp.models import AudioComparisonResult

# 获取所有比较结果
results = AudioComparisonResult.objects.all()
for result in results:
    print(result)

from myapp.models import AudioFile, SingleAudioFile, AudioComparisonResult

print(AudioFile.objects.count())  # 应该返回 0
print(SingleAudioFile.objects.count())  # 应该返回 0
print(AudioComparisonResult.objects.count())  # 应该返回 0

